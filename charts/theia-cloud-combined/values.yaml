hosts:
  configuration:
    &hostsConfig # This is a YAML anchor for reusability and readability
    baseHost: artemis.cit.tum.de
    service: service.theia
    landing: theia
    instance: instance.theia

theia-certificates:
  hosts:
    configuration: *hostsConfig

theia-cloud:
  app:
    id: nJV3nKZmpxTD4wu2
    name: Theia Cloud

  issuer:
    email: ls1.itg@in.tum.de

  hosts:
    configuration: *hostsConfig
    allWildcardInstances: ["*.webview."]

  ingress:
    #instanceName: "theia-cloud-ws-ingress"
    clusterIssuer: letsencrypt-prod
    certManagerAnnotations: false
    instances:
      allWildcardSecretNames: {"*.webview.": static-theia-cert}

  monitor:
    enable: true
    activityTracker:
      enable: true
      interval: 3

  operator:
    image: ghcr.io/ls1intum/theia/operator:latest
    eagerStart: false
    replicas: 1
    sessionsPerUser: 10
    storageClassName: csi-rbd-sc

  service:
    image: ghcr.io/ls1intum/theia/service:latest
    # Public token (must match app.id or be set explicitly)
    authToken: nJV3nKZmpxTD4wu2 

  preloading:
    images:
      - ghcr.io/ls1intum/theia/landing-page:latest
      - ghcr.io/ls1intum/theia/java-17:latest
      - ghcr.io/ls1intum/theia/c:latest
      - ghcr.io/ls1intum/theia/javascript:latest
      - ghcr.io/ls1intum/theia/ocaml:latest
      - ghcr.io/ls1intum/theia/rust:latest
      - ghcr.io/ls1intum/theia/python:latest

  imagePullPolicy: Always

  # Do not install demoApplication
  demoApplication:
    install: false

  landingPage:
    # We use the try now page as landing page since the default does not support mutliple apps -> https://github.com/eclipsesource/theia-cloud/discussions/301
    image: ghcr.io/ls1intum/theia/landing-page:latest
    # We can define a default blueprint
    appDefinition: "java-17-latest"
    ephemeralStorage: false
    additionalApps:
      java-17-latest:
        label: Java
      c-latest:
        label: C
      javascript-latest:
        label: Javascript
      ocaml-latest:
        label: Ocaml
      python-latest:
        label: Python
      rust-latest:
        label: Rust
    infoTitle: "Welcome to Theia - your tailor-made online IDE"
    infoText: "We are offering a online programming environment perfectly fitting for your project, please log in to continue."
    loadingText: "Preparing your personal Online IDE..."
    footerLinks:
      attribution:
        text: "Built by TUM LS1 Team üë®‚Äçüíª"
        url: "https://aet.cit.tum.de/"
        version: "v1.0.0"
      bugReport:
        text: "Report a bug üêõ"
        url: "https://github.com/ls1intum/theia-cloud/issues"
      featureRequest:
        text: "Request a feature ‚ú®"
        url: "https://github.com/ls1intum/theia-cloud/issues"
      about:
        text: "About"
        url: ""

  keycloak:
    enable: true
    adminGroup: "/theia-cloud/admin"

    # -- Key cloak auth URL. Only has to be specified when enable: true
    authUrl: "https://keycloak.ase.in.tum.de/"

    # -- The Keycloak Realm. Only has to be specified when enable: true
    realm: "Test"

    # -- The client-id. Only has to be specified when enable: true
    clientId: "theia-cloud"

    # -- The oaid client secret. In case you configure your keycloak client as confidential,
    # then you may specifiy the secret here.
    # If you stick with our default public client, you may leave below value. For public clients
    # keycloak does not generate a client-secret, but in order to make oath2-proxy happy,
    # we will pass a value
    clientSecret: "placeholder"

    # -- The cookie secret. This should not be public! Only has to be specified when enable: true
    # See https://oauth2-proxy.github.io/oauth2-proxy/configuration/overview/
    # for how to generate a strong cookie secret.
    cookieSecret: "placeholder"

# Configure the theia-appdefinitions subchart
theia-appdefinitions:
  # Default image tag for all app definitions (can be overridden per app)
  defaultImageTag: latest
  # Individual apps can override the tag in their definition, e.g.:
  # apps:
  #   - name: java-17-v1
  #     image: ghcr.io/ls1intum/theia/java-17
  #     imageTag: v1.0.0
  #   - name: python-v2
  #     image: ghcr.io/ls1intum/theia/python
  #     imageTag: v2.0.0

theia-workspace-garbage-collector:
  replicaCount: 1
  image:
    repository: ghcr.io/ls1intum/theia/garbage-collector
    tag: latest
    pullPolicy: Always

  serviceAccount:
    name: garbage-collector-sa

  env:
    # The time to live of a workspace. The default is 2 weeks
    WORKSPACE_TTL: "1209600s"
    # The interval at which to check for old workspaces. The Default is 30 minutes
    CHECK_INTERVAL: "1800s"
